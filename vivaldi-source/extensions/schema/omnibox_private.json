// Copyright (c) 2024 Vivaldi Technologies AS. All rights reserved
// Copyright (c) 2012 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

[
  {
    "namespace": "omniboxPrivate",
    "description": "Use the <code>vivaldi.omniboxPrivate</code> API to start queries with the address field omnibox.</a>.",
    "compiler_options": {
      "implemented_in": "extensions/api/omnibox/omnibox_private_api.h"
    },
    "dependencies": ["historyPrivate"],
    "types": [
      {
        "id": "OmniboxItemCategory",
        "type": "string",
        "enum": [
          "search",
          "history",
          "search-suggestion",
          "url-suggestion",
          "direct-match",
          "bookmark",
          "nickname",
          "open-tab",
          "top-sites",
          "clipboard",
          "calculator",
          "internal-message",
          "other",
          "recent-typed-history"
        ],
        "description": "The category in which the item belong."
      },
      {
        "id": "OmniboxProviderName",
        "type": "string",
        "enum": [
          "Bookmark",
          "Builtin",
          "Clipboard",
          "Document",
          "HistoryQuick",
          "HistoryURL",
          "Keyword",
          "OnDeviceHead",
          "Search",
          "Shortcuts",
          "ZeroSuggest",
          "LocalHistoryZeroSuggest",
          "QueryTile",
          "MostVisitedSites",
          "VerbatimMatch",
          "VoiceSuggest",
          "HistoryFuzzy",
          "OpenTab",
          "HistoryCluster",
          "Calculator",
          "FeaturedSearch",
          "HistoryEmbeddings",
          "BookmarkNickname",
          "DirectMatch",
          "RecentTypedHistory",
          "Unknown"
        ]
      },
      {
        "id": "OmniboxFocusType",
        "type": "string",
        "enum": [
          "INTERACTION_DEFAULT",
          "INTERACTION_FOCUS"
        ]
      },
      {
        "id": "PageClassification",
        "type": "string",
        "enum": [
          "NTP",
          "BLANK",
          "OTHER"
        ]
      },
      {
        "id": "OmniboxItem",
        "type": "object",
        "description": "An object encapsulating one result of a omnibox query.",
        "properties": {
          "allowedToBeDefaultMatch": {
            "description": "Is allowed to be default match.",
            "type": "boolean"
          },
          "contents": {
            "type": "string",
            "description": "The main text displayed in the address bar dropdown."
          },
          "destinationUrl": {
            "type": "string",
            "description": "The destination url"
          },
          "fillIntoEdit": {
            "type": "string",
            "description": "The text to fill into edit."
          },
          "hasTabMatch": {
            "description": "Matches open tab.",
            "type": "boolean"
          },
          "relevance": {
            "type": "integer",
            "description": "The relevance score."
          },
          "providerName": {
            "$ref": "OmniboxProviderName",
              "description": "The provider name."
          },
          "transition": {
            "$ref": "historyPrivate.TransitionType",
            "description": "The transition type to use when the user opens this match."
          },
          "description": {
            "type": "string",
            "description": "Helper text, such as a title, description or search."
          },
          "inlineAutocompletion": {
            "type": "string",
            "description": "The inline autocompletion to display after the user's input in the omnibox, if this match becomes the default match.  It may be empty."
          },
          "category": {
            "$ref": "OmniboxItemCategory",
            "description": "The category in which the item belong."
          },
          "deletable": {
            "type": "boolean",
            "description": "Should the user be able to delete this match."
          },
          "type": {
            "type": "string",
            "description": "The type of provider."
          },
        "faviconUrl": {
          "type": "string",
          "description": "The url of the favicon."
        },
        "faviconType": {
          "type": "string",
          "description": "How to load the favicon. This is used by Favicon component."
        }
        }
      }
    ],
    "functions": [
      {
        "name": "startOmnibox",
        "type": "function",
        "description": "",
        "parameters": [
          {
            "name": "parameters",
            "type": "object",
            "properties": {
              "query": {
                "type": "string",
                "description": "A piece of text entered in Omnibox"
              },
              "preventInlineAutocomplete": {
                "type": "boolean",
                "description": "Prevent inline autocomplete"
              },
              "clearStateBeforeSearching": {
                "type": "boolean",
                "description": "Don't reuse previous results from slow providers while waiting for their new results."
              },
              "fromSearchField": {
                "type": "boolean",
                "description": "If true, the query originated from search field. Limiting the number of providers run"
              },
              "searchEngineGUID": {
                "type": "string",
                "description": "Contains the GUID of the search engine. If no search engine was specified, string will be empty"
              },
              "focusType": {
                "$ref": "OmniboxFocusType",
                "description": "Specify the UI interaction that started autocomplete. ZeroSuggestion is only activated on specific focus"
              },
              "pageClassification": {
                "$ref": "PageClassification",
                "description": "The type of page the user was on when they used the omnibox. Or the type of page for which suggestions were prefetched from the server"
              }
            }
          }
        ]
      }
    ],
    "events": [
      {
        "name": "onOmniboxResultChanged",
        "type": "function",
        "description": "Fired when omnibox results are ready.",
        "parameters": [
          {
            "name": "results",
            "type": "object",
            "properties": {
              "combinedResults": {
                "type": "array",
                "items": { "$ref": "OmniboxItem" }
              },
              "inputText": {
                "description": "User-provided text to be completed.",
                "type": "string"
              },
              "done": {
                "description": "No more events for query will follow.",
                "type": "boolean"
              }
            }
          }
        ]
      }
    ]
  }
]
